<p>Sometimes it is useful to add "tracing logs" to your program so you can see the values of variables and computations as the program is running. For example, if we were writing purely in JavaScript, we might write</p>
<pre class="snippet numbered"><ol class="snippet"><li value="1"><span style="color: #D73A49">function</span><span style="color: #24292E"> </span><span style="color: #6F42C1">fib</span><span style="color: #24292E">(</span><span style="color: #E36209">n</span><span style="color: #24292E">) {</span></li><li value="2"><span style="color: #24292E">  console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #032F62">`Starting to compute Fibonacci`</span><span style="color: #24292E">);</span></li><li value="3"><span style="color: #24292E">  </span><span style="color: #D73A49">let</span><span style="color: #24292E"> i </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #24292E">;</span></li><li value="4"><span style="color: #24292E">  </span><span style="color: #D73A49">let</span><span style="color: #24292E"> [a, b] </span><span style="color: #D73A49">=</span><span style="color: #24292E"> [</span><span style="color: #005CC5">0</span><span style="color: #24292E">, </span><span style="color: #005CC5">1</span><span style="color: #24292E">];</span></li><li value="5"><span style="color: #24292E">  </span><span style="color: #D73A49">while</span><span style="color: #24292E"> ( i</span><span style="color: #D73A49">++</span><span style="color: #24292E"> </span><span style="color: #D73A49">&lt;</span><span style="color: #24292E"> n ) {</span></li><li value="6"><span style="color: #24292E">    console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(i, a, b);</span></li><li value="7"><span style="color: #24292E">    [a, b] </span><span style="color: #D73A49">=</span><span style="color: #24292E"> [b, a </span><span style="color: #D73A49">+</span><span style="color: #24292E"> b];</span></li><li value="8"><span style="color: #24292E">  }</span></li><li value="9"><span style="color: #24292E">  </span><span style="color: #D73A49">return</span><span style="color: #24292E"> a;</span></li><li value="10"><span style="color: #24292E">}</span></li><li value="11"><span style="color: #6F42C1">fib</span><span style="color: #24292E">(</span><span style="color: #005CC5">9</span><span style="color: #24292E">);</span></li></ol></pre>
<p>And we'd see the output</p>
<pre class="snippet numbered"><ol class="snippet"><li value="1">Starting to compute Fibonacci</li><li value="2">2 0 1</li><li value="3">3 1 1</li><li value="4">4 1 2</li><li value="5">5 2 3</li><li value="6">6 3 5</li><li value="7">7 5 8</li><li value="8">8 8 13</li><li value="9">9 13 21</li></ol></pre>
<p>How can we do something like this in Reach? The key is to use participant interact interfaces to share arbitrary information with the frontend, which has the ability to log to a console or any other tracing service. For example:</p>
<pre class="snippet numbered"><ol class="snippet"><li value="1"><span style="color: #D73A49">export</span><span style="color: #24292E"> </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">main</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Reach.</span><span style="color: #6F42C1">App</span><span style="color: #24292E">(() </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> {</span></li><li value="2"><span style="color: #24292E">  </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">A</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Participant</span><span style="color: #24292E">(</span><span style="color: #032F62">'Alice'</span><span style="color: #24292E">, {</span></li><li value="3"><span style="color: #24292E">    logBool: </span><span style="color: #6F42C1">Fun</span><span style="color: #24292E">([UBool], Null),</span></li><li value="4"><span style="color: #24292E">    logNumber: </span><span style="color: #6F42C1">Fun</span><span style="color: #24292E">([UInt], Null),</span></li><li value="5"><span style="color: #24292E">  });</span></li><li value="6"><span style="color: #24292E">  </span><span style="color: #6F42C1">deploy</span><span style="color: #24292E">();</span></li><li value="7"><span style="color: #24292E">  </span><span style="color: #005CC5">A</span><span style="color: #24292E">.</span><span style="color: #6F42C1">only</span><span style="color: #24292E">(() </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> {</span></li><li value="8"><span style="color: #24292E">    interact.</span><span style="color: #6F42C1">logBool</span><span style="color: #24292E">(</span><span style="color: #005CC5">true</span><span style="color: #24292E">);</span></li><li value="9"><span style="color: #24292E">    interact.</span><span style="color: #6F42C1">logNumber</span><span style="color: #24292E">(</span><span style="color: #005CC5">1</span><span style="color: #24292E">); });</span></li><li value="10"><span style="color: #24292E">  </span><span style="color: #6F42C1">exit</span><span style="color: #24292E">();</span></li><li value="11"><span style="color: #24292E">});</span></li></ol></pre>
<p>
  However, as this example shows, it can be inconvenient to use this pattern, because <code>Fun</code> types constrain their domains to particular input data types, but we may need to log different kinds of data at different points in the program.
  Similarly, it is inconvenient to use an entire <code>only</code> block for a simple log.
</p>
<p>
  Reach provides two conveniences for this situation that taste great together: unconstrained domain function types and interact shorthand.
  The first allows a function in a participant interact interface to have a completely unconstrained domain.
  The second allows a call to a frontend from anywhere without an <code>only</code>, provided the function returns no value.
  If we re-write the above example using both of these patterns, it looks like:
</p>
<pre class="snippet numbered"><ol class="snippet"><li value="1"><span style="color: #D73A49">export</span><span style="color: #24292E"> </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">main</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Reach.</span><span style="color: #6F42C1">App</span><span style="color: #24292E">(() </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> {</span></li><li value="2"><span style="color: #24292E">  </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">A</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Participant</span><span style="color: #24292E">(</span><span style="color: #032F62">'Alice'</span><span style="color: #24292E">, {</span></li><li value="3"><span style="color: #24292E">    log: </span><span style="color: #6F42C1">Fun</span><span style="color: #24292E">(</span><span style="color: #005CC5">true</span><span style="color: #24292E">, Null),</span></li><li value="4"><span style="color: #24292E">  });</span></li><li value="5"><span style="color: #24292E">  </span><span style="color: #6F42C1">deploy</span><span style="color: #24292E">();</span></li><li value="6"><span style="color: #24292E">  </span><span style="color: #005CC5">A</span><span style="color: #24292E">.interact.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">true</span><span style="color: #24292E">);</span></li><li value="7"><span style="color: #24292E">  </span><span style="color: #005CC5">A</span><span style="color: #24292E">.interact.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">1</span><span style="color: #24292E">);</span></li><li value="8"><span style="color: #24292E">  </span><span style="color: #6A737D">// We can easily add more complex log entries as well.</span></li><li value="9"><span style="color: #24292E">  </span><span style="color: #005CC5">A</span><span style="color: #24292E">.interact.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">([</span><span style="color: #005CC5">1</span><span style="color: #24292E">, </span><span style="color: #005CC5">true</span><span style="color: #24292E">]);</span></li><li value="10"><span style="color: #24292E">  </span><span style="color: #005CC5">A</span><span style="color: #24292E">.interact.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">({x: </span><span style="color: #005CC5">1</span><span style="color: #24292E">, y: </span><span style="color: #005CC5">true</span><span style="color: #24292E">});</span></li><li value="11"><span style="color: #24292E">  </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">x</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #24292E">;</span></li><li value="12"><span style="color: #24292E">  </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">y</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">true</span><span style="color: #24292E">;</span></li><li value="13"><span style="color: #24292E">  </span><span style="color: #005CC5">A</span><span style="color: #24292E">.interact.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">({x, y});</span></li><li value="14"><span style="color: #24292E">  </span><span style="color: #005CC5">A</span><span style="color: #24292E">.interact.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #6F42C1">Maybe</span><span style="color: #24292E">(UInt).</span><span style="color: #6F42C1">Some</span><span style="color: #24292E">(</span><span style="color: #005CC5">5</span><span style="color: #24292E">));</span></li><li value="15"><span style="color: #24292E">  </span><span style="color: #6F42C1">exit</span><span style="color: #24292E">();</span></li><li value="16"><span style="color: #24292E">});</span></li></ol></pre>
<p>Then, a JavaScript frontend can simply use <code>console.log</code> as the value of the <code>log</code> function. Reach provides <code>hasConsoleLogger</code> and hasConsoleLogger (Frontend) in the standard library for default implementations of logging to stdout. It can be used in Reach with:</p>
<pre class="snippet numbered"><ol class="snippet"><li value="1"><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">A</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Participant</span><span style="color: #24292E">(</span><span style="color: #032F62">'Alice'</span><span style="color: #24292E">, { </span><span style="color: #D73A49">...</span><span style="color: #24292E">hasConsoleLogger })</span></li></ol></pre>
<p>and in the JavaScript frontend with:</p>
<pre class="snippet numbered"><ol class="snippet"><li value="1"><span style="color: #24292E">backend.</span><span style="color: #6F42C1">Alice</span><span style="color: #24292E">(</span></li><li value="2"><span style="color: #24292E">   ctcAlice,</span></li><li value="3"><span style="color: #24292E">   { </span><span style="color: #D73A49">...</span><span style="color: #24292E">stdlib.hasConsoleLogger },</span></li><li value="4"><span style="color: #24292E"> ),</span></li></ol></pre>