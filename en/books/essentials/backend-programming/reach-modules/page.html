<p>Reach modules are specified in source files with <code>.rsh</code> extensions (e.g. <em>index.rsh</em> or <em>dao.rsh</em>). Here is a simple example:</p>
<pre class="snippet numbered"><ol class="snippet"><li value="1"><span style="color: #032F62">'reach 0.1'</span><span style="color: #24292E">;</span></li><li value="2"><span style="color: #D73A49">export</span><span style="color: #24292E"> </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">main</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Reach.</span><span style="color: #6F42C1">App</span><span style="color: #24292E">(() </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> {</span></li><li value="3"><span style="color: #24292E">  </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">S</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Participant</span><span style="color: #24292E">(</span><span style="color: #032F62">'Seller'</span><span style="color: #24292E">, {});</span></li><li value="4"><span style="color: #24292E">  </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">B</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Participant</span><span style="color: #24292E">(</span><span style="color: #032F62">'Buyer'</span><span style="color: #24292E">, {});</span></li><li value="5"><span style="color: #24292E">  </span><span style="color: #6F42C1">deploy</span><span style="color: #24292E">();</span></li><li value="6"><span style="color: #24292E">  </span><span style="color: #6F42C1">exit</span><span style="color: #24292E">();</span></li><li value="7"><span style="color: #24292E">});</span></li></ol></pre>
<ul>
  <li>Line 1: Reach compiler version (major and minor numbers, but no patch number).</li>
  <li>Line 2: Application initialization function.</li>
  <li>Line 3-4: Expressions that instantiate participants.</li>
  <li>Line 5: Statement that transitions from Initialization mode to Step mode,</li>
  <li>Line 6: Statement that halts computation.</li>
</ul>
<p>In addition to the statements and expressions found in <a href="/en/books/essentials/backend-programming/reach-syntax/">Reach Syntax</a>, modules support the additional statements and expression described below.</p>
<h1 id="export">export</h1>
<p>The <code>export</code> statement exports definitions allowing other modules to import them. Here are three valid exports:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1"><span style="color: #D73A49">export</span><span style="color: #24292E"> </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">x</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #24292E">;</span></li><li value="2"><span style="color: #D73A49">export</span><span style="color: #24292E"> </span><span style="color: #D73A49">const</span><span style="color: #24292E"> [</span><span style="color: #005CC5">a</span><span style="color: #24292E">, </span><span style="color: #005CC5">b</span><span style="color: #24292E">, </span><span style="color: #D73A49">...</span><span style="color: #005CC5">more</span><span style="color: #24292E">] </span><span style="color: #D73A49">=</span><span style="color: #24292E"> [ </span><span style="color: #005CC5">0</span><span style="color: #24292E">, </span><span style="color: #005CC5">1</span><span style="color: #24292E">, </span><span style="color: #005CC5">2</span><span style="color: #24292E">, </span><span style="color: #005CC5">3</span><span style="color: #24292E">, </span><span style="color: #005CC5">4</span><span style="color: #24292E"> ];</span></li><li value="3"><span style="color: #D73A49">export</span><span style="color: #24292E"> </span><span style="color: #D73A49">function</span><span style="color: #24292E"> </span><span style="color: #6F42C1">add1</span><span style="color: #24292E">(</span><span style="color: #E36209">x</span><span style="color: #24292E">) { </span><span style="color: #D73A49">return</span><span style="color: #24292E"> x </span><span style="color: #D73A49">+</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #24292E">; };</span></li></ol></pre>
<p>You can use <code>export</code> to export and rename definitions after the fact, too:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1"><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">w</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">2</span><span style="color: #24292E">;</span></li><li value="2"><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">z</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span></li><li value="3"><span style="color: #D73A49">export</span><span style="color: #24292E"> {w, z </span><span style="color: #D73A49">as</span><span style="color: #24292E"> zero};</span></li></ol></pre>
<p>And, you can use <code>export</code> to re-export and rename identifiers from other modules even if you do not import these identifiers into the current module:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1"><span style="color: #D73A49">export</span><span style="color: #24292E"> {u, x </span><span style="color: #D73A49">as</span><span style="color: #24292E"> other_x} </span><span style="color: #D73A49">from</span><span style="color: #24292E"> </span><span style="color: #032F62">'./other-module.rsh'</span><span style="color: #24292E">;</span></li></ol></pre>
<p>Frontends use the <a href="http://localhost:8081/en/books/essentials/frontend-programming/javascript-frontends/">Reach JS Standard Library</a> <code>getExports</code> method to access backend exports.</p>
<h1 id="import">import</h1>
<p>The <code>import</code> statement imports (into the current module) definitions from other Reach modules. Reach supports <em>local</em> and <em>package</em> imports.</p>
<h2 id="local">Local</h2>
<p>A <em>local import</em> imports (into the current module) other modules in your project:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1"><span style="color: #D73A49">import</span><span style="color: #24292E"> </span><span style="color: #032F62">'games-of-chance.rsh'</span><span style="color: #24292E">;</span></li></ol></pre>
<p>When a module, <code>X</code>, contains a local import, written <code>import "LIB.rsh";</code>, then the path <code>"LIB.rsh"</code> must resolve to another Reach source file. The exports from the module defined by <code>"LIB.rsh"</code> are included in the set of bound identifiers in <code>X</code>:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1"><span style="color: #D73A49">import</span><span style="color: #24292E"> {flipCoin, rollDice </span><span style="color: #D73A49">as</span><span style="color: #24292E"> d6} </span><span style="color: #D73A49">from</span><span style="color: #24292E"> </span><span style="color: #032F62">'games-of-chance.rsh'</span><span style="color: #24292E">;</span></li></ol></pre>
<p>Import statements may limit or rename the imported identifiers:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1"><span style="color: #D73A49">import</span><span style="color: #24292E"> </span><span style="color: #005CC5">*</span><span style="color: #24292E"> </span><span style="color: #D73A49">as</span><span style="color: #24292E"> gamesOfChance </span><span style="color: #D73A49">from</span><span style="color: #24292E"> </span><span style="color: #032F62">'games-of-chance.rsh'</span><span style="color: #24292E">;</span></li></ol></pre>
<p>Imports may also bind the entire module to a single identifier which is an object with fields corresponding to that module’s exports. Import cycles are invalid. The path given to an import may not include <code>..</code> to specify files outside the current directory, nor may it be an absolute path. It must be a relative path which is resolved relative to the parent directory of the source file in which it appears.</p>
<h2 id="package">Package</h2>
<p>A <em>package import</em> imports (into the local module) remote libraries that may be fetched from <a href="https://github.com/">Github</a> or other sources:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1"><span style="color: #D73A49">import</span><span style="color: #24292E"> </span><span style="color: #005CC5">*</span><span style="color: #24292E"> </span><span style="color: #D73A49">as</span><span style="color: #24292E"> func </span><span style="color: #D73A49">from</span><span style="color: #24292E"> </span><span style="color: #032F62">'@reach-sh/reach-example-package'</span><span style="color: #24292E">;</span></li><li value="2"><span style="color: #D73A49">import</span><span style="color: #24292E"> </span><span style="color: #005CC5">*</span><span style="color: #24292E"> </span><span style="color: #D73A49">as</span><span style="color: #24292E"> func </span><span style="color: #D73A49">from</span><span style="color: #24292E"> </span><span style="color: #032F62">'@reach-sh/reach-example-package:src/func.rsh'</span><span style="color: #24292E">;</span></li><li value="3"><span style="color: #D73A49">import</span><span style="color: #24292E"> </span><span style="color: #005CC5">*</span><span style="color: #24292E"> </span><span style="color: #D73A49">as</span><span style="color: #24292E"> func </span><span style="color: #D73A49">from</span><span style="color: #24292E"> </span><span style="color: #032F62">'@github.com:reach-sh/reach-example-package#main:src/func.rsh'</span><span style="color: #24292E">;</span></li></ol></pre>
<p>Package imports obey the same rules as local imports, but they support the following extended path syntax which allows Reach programmers to seamlessly plug into third-party libraries hosted on the internet:</p>
<div>
  <img src="/en/books/essentials/backend-programming/reach-modules/package-import-format.png" class="img-fluid" width="800" height="120" loading="lazy">
</div>
<p>Note the following:</p>
<ol>
  <li>All valid package imports must begin with the <code>@</code> character.</li>
  <li>If you do not specify a <em>Tag</em>, Reach defaults to the master branch and then the main branch.</li>
  <li>If you do specify a <em>Tag</em>, use git tags to denote version releases (e.g. <code>v0.2.1</code>). Branch names also work.</li>
</ol>
<p>Below are several pseudo examples:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1"><span style="color: #24292E">@account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo</span></li><li value="2"><span style="color: #24292E">@account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo:</span></li><li value="3"><span style="color: #24292E">@account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo:a</span><span style="color: #D73A49">/</span><span style="color: #24292E">b</span><span style="color: #D73A49">/</span><span style="color: #24292E">file.rsh</span></li><li value="4"><span style="color: #24292E">@account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo:a</span><span style="color: #D73A49">/</span><span style="color: #24292E">b</span><span style="color: #D73A49">/</span></li><li value="5"><span style="color: #24292E">@account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo:file.rsh</span></li><li value="6"><span style="color: #24292E">@account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#</span></li><li value="7"><span style="color: #24292E">@account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#:</span></li><li value="8"><span style="color: #24292E">@account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#:a</span><span style="color: #D73A49">/</span><span style="color: #24292E">b</span><span style="color: #D73A49">/</span><span style="color: #24292E">file.rsh</span></li><li value="9"><span style="color: #24292E">@account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#:a</span><span style="color: #D73A49">/</span><span style="color: #24292E">b</span><span style="color: #D73A49">/</span></li><li value="10"><span style="color: #24292E">@account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#:file.rsh</span></li><li value="11"><span style="color: #24292E">@account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#ref</span></li><li value="12"><span style="color: #24292E">@account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#ref:</span></li><li value="13"><span style="color: #24292E">@account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#ref:a</span><span style="color: #D73A49">/</span><span style="color: #24292E">b</span><span style="color: #D73A49">/</span><span style="color: #24292E">file.rsh</span></li><li value="14"><span style="color: #24292E">@account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#ref:a</span><span style="color: #D73A49">/</span><span style="color: #24292E">b</span><span style="color: #D73A49">/</span></li><li value="15"><span style="color: #24292E">@account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#ref:file.rsh</span></li><li value="16"><span style="color: #24292E">   </span></li><li value="17"><span style="color: #24292E">@server:account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo</span></li><li value="18"><span style="color: #24292E">@server:account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo:</span></li><li value="19"><span style="color: #24292E">@server:account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo:a</span><span style="color: #D73A49">/</span><span style="color: #24292E">b</span><span style="color: #D73A49">/</span><span style="color: #24292E">file.rsh</span></li><li value="20"><span style="color: #24292E">@server:account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo:a</span><span style="color: #D73A49">/</span><span style="color: #24292E">b</span><span style="color: #D73A49">/</span></li><li value="21"><span style="color: #24292E">@server:account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo:file.rsh</span></li><li value="22"><span style="color: #24292E">@server:account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#</span></li><li value="23"><span style="color: #24292E">@server:account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#:</span></li><li value="24"><span style="color: #24292E">@server:account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#:a</span><span style="color: #D73A49">/</span><span style="color: #24292E">b</span><span style="color: #D73A49">/</span><span style="color: #24292E">file.rsh</span></li><li value="25"><span style="color: #24292E">@server:account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#:a</span><span style="color: #D73A49">/</span><span style="color: #24292E">b</span><span style="color: #D73A49">/</span></li><li value="26"><span style="color: #24292E">@server:account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#:file.rsh</span></li><li value="27"><span style="color: #24292E">@server:account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#ref</span></li><li value="28"><span style="color: #24292E">@server:account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#ref:</span></li><li value="29"><span style="color: #24292E">@server:account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#ref:a</span><span style="color: #D73A49">/</span><span style="color: #24292E">b</span><span style="color: #D73A49">/</span><span style="color: #24292E">file.rsh</span></li><li value="30"><span style="color: #24292E">@server:account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#ref:a</span><span style="color: #D73A49">/</span><span style="color: #24292E">b</span><span style="color: #D73A49">/</span></li><li value="31"><span style="color: #24292E">@server:account</span><span style="color: #D73A49">/</span><span style="color: #24292E">repo#ref:file.rsh</span></li></ol></pre>
<p>Since git repositories evolve and change over time, Reach takes extra steps in order to pin a given module import’s version to the specific SHA hash of the specified revision at the time the package is first installed. These pins are stored in a <a href="/en/books/essentials/backend-programming/reach-script/#reach-compile">lockfile</a>, which should be included in your source control system.</p>
<h1 id="reachapp">Reach.App</h1>
<p>The <code>Reach.App</code> expression accepts a no-argument function (e.g. <code>() =&gt; {}</code>) that specifies the entire DApp between its curly braces:</p>
<pre class="snippet numbered"><ol class="snippet"><li value="1"><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">sellerInteract</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {</span></li><li value="2"><span style="color: #24292E">  displayResult: </span><span style="color: #6F42C1">Fun</span><span style="color: #24292E">(Int, Null) </span></li><li value="3"><span style="color: #24292E">};</span></li><li value="4"></li><li value="5"><span style="color: #D73A49">export</span><span style="color: #24292E"> </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">main</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Reach.</span><span style="color: #6F42C1">App</span><span style="color: #24292E">(() </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> {</span></li><li value="6"><span style="color: #24292E">  </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">S</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Participant</span><span style="color: #24292E">(</span><span style="color: #032F62">'Seller'</span><span style="color: #24292E">, sellerInteract);</span></li><li value="7"><span style="color: #24292E">  </span><span style="color: #6F42C1">deploy</span><span style="color: #24292E">();</span></li><li value="8"></li><li value="9"><span style="color: #24292E">  </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">result</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">;</span></li><li value="10"><span style="color: #24292E">  </span><span style="color: #005CC5">S</span><span style="color: #24292E">.</span><span style="color: #6F42C1">only</span><span style="color: #24292E">(() </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> { interact.</span><span style="color: #6F42C1">displayResult</span><span style="color: #24292E">(result); });</span></li><li value="11"></li><li value="12"><span style="color: #24292E"> </span><span style="color: #6F42C1">exit</span><span style="color: #24292E">();</span></li><li value="13"><span style="color: #24292E">});</span></li></ol></pre>
<ul>
  <li>Line 5: The function starts in <a href="/en/books/essentials/backend-programming/reach-modes/#initialization">Initialization</a> mode.</li>
  <li>Line 7: <code>deploy()</code> transitions the function to <a href="/en/books/essentials/backend-programming/reach-modes/#step">Step</a> mode.</li>
</ul>